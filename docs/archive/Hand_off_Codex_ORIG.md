{\rtf1\ansi\ansicpg1252\cocoartf2639
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\froman\fcharset0 Times-Roman;\f1\froman\fcharset0 Times-Bold;\f2\ftech\fcharset77 Symbol;
\f3\fmodern\fcharset0 Courier;\f4\fnil\fcharset0 Menlo-Regular;\f5\fmodern\fcharset0 Courier-Bold;
\f6\fnil\fcharset0 LucidaGrande;\f7\froman\fcharset0 Times-Italic;}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;\red0\green0\blue233;}
{\*\expandedcolortbl;;\cssrgb\c0\c0\c0;\cssrgb\c0\c0\c93333;}
{\*\listtable{\list\listtemplateid1\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}}{\leveltext\leveltemplateid1\'01\'00;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid1}
{\list\listtemplateid2\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid101\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{circle\}}{\leveltext\leveltemplateid102\'01\uc0\u9702 ;}{\levelnumbers;}\fi-360\li1440\lin1440 }{\listname ;}\listid2}
{\list\listtemplateid3\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid201\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{circle\}}{\leveltext\leveltemplateid202\'01\uc0\u9702 ;}{\levelnumbers;}\fi-360\li1440\lin1440 }{\listname ;}\listid3}
{\list\listtemplateid4\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid301\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid4}
{\list\listtemplateid5\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}}{\leveltext\leveltemplateid401\'01\'00;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{circle\}}{\leveltext\leveltemplateid402\'01\uc0\u9702 ;}{\levelnumbers;}\fi-360\li1440\lin1440 }{\listname ;}\listid5}
{\list\listtemplateid6\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid501\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid6}
{\list\listtemplateid7\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid601\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid7}
{\list\listtemplateid8\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid701\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid8}
{\list\listtemplateid9\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid801\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid9}
{\list\listtemplateid10\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}}{\leveltext\leveltemplateid901\'01\'00;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{circle\}}{\leveltext\leveltemplateid902\'01\uc0\u9702 ;}{\levelnumbers;}\fi-360\li1440\lin1440 }{\listname ;}\listid10}
{\list\listtemplateid11\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1001\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid11}
{\list\listtemplateid12\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1101\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid12}}
{\*\listoverridetable{\listoverride\listid1\listoverridecount0\ls1}{\listoverride\listid2\listoverridecount0\ls2}{\listoverride\listid3\listoverridecount0\ls3}{\listoverride\listid4\listoverridecount0\ls4}{\listoverride\listid5\listoverridecount0\ls5}{\listoverride\listid6\listoverridecount0\ls6}{\listoverride\listid7\listoverridecount0\ls7}{\listoverride\listid8\listoverridecount0\ls8}{\listoverride\listid9\listoverridecount0\ls9}{\listoverride\listid10\listoverridecount0\ls10}{\listoverride\listid11\listoverridecount0\ls11}{\listoverride\listid12\listoverridecount0\ls12}}
\paperw11900\paperh16840\margl1440\margr1440\vieww28600\viewh18000\viewkind0
\deftab720
\pard\pardeftab720\partightenfactor0

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 \
\pard\pardeftab720\sa321\partightenfactor0

\f1\b\fs48 \cf0 TabsAGO 
\f2\b0 \uc0\u8594 
\f1\b  Codex CLI Handoff\
\pard\pardeftab720\sa298\partightenfactor0

\fs36 \cf0 0) TL;DR (what you should actually do)\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls1\ilvl0
\fs24 \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	1	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Add a playbook MD
\f0\b0  the agent will follow:\uc0\u8232 
\f3\fs26 docs/PLAYBOOK_Thumbnails_LastViewport.md
\f0\fs24  (content template below).\
\ls1\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	2	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Add agent guardrails
\f0\b0 :\uc0\u8232 
\f3\fs26 docs/CONTRIBUTING_AGENT.md
\f0\fs24  (rules), 
\f3\fs26 docs/TASKS/
\f0\fs24  (small PR tickets).\
\ls1\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	3	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Trim the context
\f0\b0  (don\'92t feed the agent the whole world):\uc0\u8232 keep only 
\f3\fs26 public/manifest.json
\f0\fs24 , 
\f3\fs26 src/**
\f0\fs24 , 
\f3\fs26 docs/**
\f0\fs24  in initial context. Exclude build artifacts, screenshots, large blobs.\
\ls1\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	4	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Have Codex CLI ingest the playbook
\f0\b0 , not a freeform chat wall. Ask it to 
\f1\b propose a file list + diffs per PR
\f0\b0  before editing.\
\ls1\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	5	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Lock scope
\f0\b0 : one PR per stage (permissions & wiring 
\f2 \uc0\u8594 
\f0  background scheduler 
\f2 \uc0\u8594 
\f0  storage 
\f2 \uc0\u8594 
\f0  content script 
\f2 \uc0\u8594 
\f0  UI 
\f2 \uc0\u8594 
\f0  docs & tests 
\f2 \uc0\u8594 
\f0  cleanup).\
\pard\pardeftab720\sa240\partightenfactor0
\cf0 You do 
\f1\b not
\f0\b0  need to \'93clean the repo\'94 first beyond the minimal context hygiene below; the codebase is already good enough to start the thumbnails work. Do the tidy-up gradually as part of the PRs.\
\pard\pardeftab720\partightenfactor0
\cf0 \
\pard\pardeftab720\sa298\partightenfactor0

\f1\b\fs36 \cf0 1) Minimal context hygiene (so Codex CLI doesn\'92t drown)\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls2\ilvl0
\fs24 \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Exclude
\f0\b0  from Codex CLI context: 
\f3\fs26 node_modules/
\f0\fs24 , 
\f3\fs26 dist/
\f0\fs24 , 
\f3\fs26 build/
\f0\fs24 , 
\f3\fs26 .parcel-cache/
\f0\fs24 , 
\f3\fs26 .next/
\f0\fs24 , 
\f3\fs26 coverage/
\f0\fs24 , any 
\f3\fs26 *.png/*.jpg
\f0\fs24  not needed, and any large sample blobs.\
\ls2\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Include
\f0\b0 :\
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240\partightenfactor0
\ls2\ilvl1
\f3\fs26 \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f4 \uc0\u9702 
\f3 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 public/manifest.json
\f0\fs24  (permissions & bg worker entry) \'97 current: {\field{\*\fldinst{HYPERLINK "https://github.com/xavstack/TabsAgo/blob/master/public/manifest.json#L13-L22"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://github.com/xavstack/TabsAgo/blob/master/public/manifest.json#L13-L22}}\
\ls2\ilvl1
\f3\fs26 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f4 \uc0\u9702 
\f3 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 src/service-worker.ts
\f0\fs24  (event wiring) \'97 current: {\field{\*\fldinst{HYPERLINK "https://github.com/xavstack/TabsAgo/blob/master/src/service-worker.ts"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://github.com/xavstack/TabsAgo/blob/master/src/service-worker.ts}}\
\ls2\ilvl1
\f3\fs26 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f4 \uc0\u9702 
\f3 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 src/services/ThumbnailService.ts
\f0\fs24  (to deprecate tab-switching capture path) \'97 current: {\field{\*\fldinst{HYPERLINK "https://github.com/xavstack/TabsAgo/blob/master/src/services/ThumbnailService.ts#L60-L116"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://github.com/xavstack/TabsAgo/blob/master/src/services/ThumbnailService.ts#L60-L116}}\
\ls2\ilvl1
\f3\fs26 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f4 \uc0\u9702 
\f3 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 src/views/App.tsx
\f0\fs24  (UI copy & manual capture actions) \'97 current:\uc0\u8232 {\field{\*\fldinst{HYPERLINK "https://github.com/xavstack/TabsAgo/blob/master/src/views/App.tsx#L197-L226"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://github.com/xavstack/TabsAgo/blob/master/src/views/App.tsx#L197-L226}} and {\field{\*\fldinst{HYPERLINK "https://github.com/xavstack/TabsAgo/blob/master/src/views/App.tsx#L730-L733"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://github.com/xavstack/TabsAgo/blob/master/src/views/App.tsx#L730-L733}}\
\ls2\ilvl1
\f3\fs26 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f4 \uc0\u9702 
\f3 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 src/services/SessionSafetyService.ts
\f0\fs24  (legacy unload hooks) \'97 current: {\field{\*\fldinst{HYPERLINK "https://github.com/xavstack/TabsAgo/blob/master/src/services/SessionSafetyService.ts#L11-L17"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://github.com/xavstack/TabsAgo/blob/master/src/services/SessionSafetyService.ts#L11-L17}}\
\ls2\ilvl1
\f3\fs26 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f4 \uc0\u9702 
\f3 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 docs/**
\f0\fs24  (keep; move any outdated long docs to 
\f3\fs26 docs/archive/
\f0\fs24  to lower noise)\
\pard\pardeftab720\sa240\partightenfactor0
\cf0 If Codex CLI supports include/exclude globs, point it at 
\f3\fs26 public/manifest.json
\f0\fs24 , 
\f3\fs26 src/**
\f0\fs24 , and 
\f3\fs26 docs/**
\f0\fs24  only. Otherwise, instruct it explicitly in the kickoff message to 
\f1\b ignore everything else
\f0\b0 .\
\pard\pardeftab720\partightenfactor0
\cf0 \
\pard\pardeftab720\sa298\partightenfactor0

\f1\b\fs36 \cf0 2) Playbook the agent will follow (drop this into 
\f5\fs39 docs/PLAYBOOK_Thumbnails_LastViewport.md
\f1\fs36 )\
\pard\pardeftab720\sa240\partightenfactor0

\fs24 \cf0 Title:
\f0\b0  TabsAGO \'97 Automatic Thumbnails & Last-Viewport (Agent Playbook)\

\f1\b Context & non-negotiables
\f0\b0 \
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls3\ilvl0\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Replace manual, disruptive batch capture (no more tab switching). The current flow lives in 
\f3\fs26 ThumbnailService.captureAllTabsInWindow()
\f0\fs24  and is referenced by 
\f3\fs26 App.tsx
\f0\fs24 . See:\
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240\partightenfactor0
\ls3\ilvl1
\f3\fs26 \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f4 \uc0\u9702 
\f3 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 ThumbnailService.ts
\f0\fs24  tab activation & capture loop: {\field{\*\fldinst{HYPERLINK "https://github.com/xavstack/TabsAgo/blob/master/src/services/ThumbnailService.ts#L60-L116"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://github.com/xavstack/TabsAgo/blob/master/src/services/ThumbnailService.ts#L60-L116}}\
\ls3\ilvl1
\f3\fs26 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f4 \uc0\u9702 
\f3 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 App.tsx
\f0\fs24  manual trigger & help text: {\field{\*\fldinst{HYPERLINK "https://github.com/xavstack/TabsAgo/blob/master/src/views/App.tsx#L197-L226"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://github.com/xavstack/TabsAgo/blob/master/src/views/App.tsx#L197-L226}} and {\field{\*\fldinst{HYPERLINK "https://github.com/xavstack/TabsAgo/blob/master/src/views/App.tsx#L730-L733"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://github.com/xavstack/TabsAgo/blob/master/src/views/App.tsx#L730-L733}}\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls3\ilvl0\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Only capture the 
\f1\b visible/active tab
\f0\b0  using 
\f3\fs26 chrome.tabs.captureVisibleTab
\f0\fs24 . Never activate background tabs to capture.\
\ls3\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 At most 
\f1\b two captures per \'93visit epoch\'94
\f0\b0 : one 
\f1\b first
\f0\b0  (after load/route commit), one 
\f1\b final
\f0\b0  (right before leaving).\
\ls3\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Save/restore scroll silently using 
\f5\b\fs26 visibilitychange
\f1\fs24 /
\f5\fs26 pagehide
\f1\fs24 /
\f5\fs26 pageshow
\f0\b0\fs24  (no 
\f3\fs26 beforeunload/unload
\f0\fs24  for state).\
\ls3\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Provide a 
\f1\b single opt-out
\f0\b0  toggle (default ON).\
\pard\pardeftab720\sa240\partightenfactor0

\f1\b \cf0 APIs & docs
\f0\b0 \
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls4\ilvl0\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Tabs: {\field{\*\fldinst{HYPERLINK "https://developer.chrome.com/docs/extensions/reference/api/tabs"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://developer.chrome.com/docs/extensions/reference/api/tabs}}\uc0\u8232 
\f3\fs26 captureVisibleTab
\f0\fs24 : {\field{\*\fldinst{HYPERLINK "https://developer.chrome.com/docs/extensions/reference/api/tabs#method-captureVisibleTab"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://developer.chrome.com/docs/extensions/reference/api/tabs#method-captureVisibleTab}}\
\ls4\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 WebNavigation: {\field{\*\fldinst{HYPERLINK "https://developer.chrome.com/docs/extensions/reference/api/webNavigation"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://developer.chrome.com/docs/extensions/reference/api/webNavigation}}\uc0\u8232 (
\f3\fs26 onCommitted
\f0\fs24 , 
\f3\fs26 onBeforeNavigate
\f0\fs24 , 
\f3\fs26 onHistoryStateUpdated
\f0\fs24 )\
\ls4\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Storage + 
\f3\fs26 storage.session
\f0\fs24 : {\field{\*\fldinst{HYPERLINK "https://developer.chrome.com/docs/extensions/reference/api/storage"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://developer.chrome.com/docs/extensions/reference/api/storage}}\uc0\u8232 {\field{\*\fldinst{HYPERLINK "https://developer.chrome.com/docs/extensions/reference/api/storage#property-StorageArea-session"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://developer.chrome.com/docs/extensions/reference/api/storage#property-StorageArea-session}}\
\ls4\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Sessions: {\field{\*\fldinst{HYPERLINK "https://developer.chrome.com/docs/extensions/reference/api/sessions"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://developer.chrome.com/docs/extensions/reference/api/sessions}}\
\ls4\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Tab Groups: {\field{\*\fldinst{HYPERLINK "https://developer.chrome.com/docs/extensions/reference/api/tabGroups"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://developer.chrome.com/docs/extensions/reference/api/tabGroups}}\
\ls4\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Offscreen (optional): {\field{\*\fldinst{HYPERLINK "https://developer.chrome.com/docs/extensions/reference/api/offscreen"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://developer.chrome.com/docs/extensions/reference/api/offscreen}}\
\ls4\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Idle (optional): {\field{\*\fldinst{HYPERLINK "https://developer.chrome.com/docs/extensions/reference/api/idle"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://developer.chrome.com/docs/extensions/reference/api/idle}}\
\ls4\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Page lifecycle:\uc0\u8232 
\f3\fs26 visibilitychange
\f0\fs24 : {\field{\*\fldinst{HYPERLINK "https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilitychange_event"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilitychange_event}}\uc0\u8232 
\f3\fs26 pagehide
\f0\fs24 : {\field{\*\fldinst{HYPERLINK "https://developer.mozilla.org/en-US/docs/Web/API/Window/pagehide_event"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://developer.mozilla.org/en-US/docs/Web/API/Window/pagehide_event}}\uc0\u8232 
\f3\fs26 pageshow
\f0\fs24 : {\field{\*\fldinst{HYPERLINK "https://developer.mozilla.org/en-US/docs/Web/API/Window/pageshow_event"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://developer.mozilla.org/en-US/docs/Web/API/Window/pageshow_event}}\uc0\u8232 BFCache: {\field{\*\fldinst{HYPERLINK "https://developer.chrome.com/docs/web-platform/bfcache/"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://developer.chrome.com/docs/web-platform/bfcache/}}\
\pard\pardeftab720\sa240\partightenfactor0

\f1\b \cf0 Deliver PRs in this order
\f0\b0 \
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls5\ilvl0
\f1\b \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	1	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 PR-1: Manifest & settings foundations
\f0\b0 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240\partightenfactor0
\ls5\ilvl1
\f3\fs26 \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f4 \uc0\u9702 
\f3 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 public/manifest.json
\f0\fs24 : add 
\f3\fs26 "webNavigation"
\f0\fs24 , 
\f3\fs26 "tabGroups"
\f0\fs24  (optional 
\f3\fs26 "idle"
\f0\fs24 , and 
\f3\fs26 "unlimitedStorage"
\f0\fs24  if later needed).\
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240\partightenfactor0
\ls5\ilvl1\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f6 \uc0\u9702 
\f0 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Register content script 
\f3\fs26 src/content/viewport.ts
\f0\fs24  (
\f3\fs26 run_at: "document_idle"
\f0\fs24 , 
\f3\fs26 <all_urls>
\f0\fs24 ).\
\ls5\ilvl1\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f6 \uc0\u9702 
\f0 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Add Settings flag 
\f3\fs26 AUTO_THUMBNAIL_CAPTURE
\f0\fs24  (default 
\f1\b true
\f0\b0 ).\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls5\ilvl0
\f1\b \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	2	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 PR-2: Background event wiring & scheduler
\f0\b0 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240\partightenfactor0
\ls5\ilvl1\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f6 \uc0\u9702 
\f0 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 In 
\f3\fs26 src/service-worker.ts
\f0\fs24 , wire 
\f3\fs26 webNavigation.onCommitted
\f0\fs24 , 
\f3\fs26 onBeforeNavigate
\f0\fs24 , 
\f3\fs26 onHistoryStateUpdated
\f0\fs24 , and 
\f3\fs26 tabs.onUpdated(status:'complete')
\f0\fs24  for 
\f1\b active
\f0\b0  tab only.\
\ls5\ilvl1\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f6 \uc0\u9702 
\f0 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Create 
\f3\fs26 src/services/background/CaptureScheduler.ts
\f0\fs24  for throttled, deduped capture scheduling.\
\ls5\ilvl1\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f6 \uc0\u9702 
\f0 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Enforce 
\f1\b no
\f0\b0  tab activation; skip minimized/occluded windows.\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls5\ilvl0
\f1\b \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	3	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 PR-3: Thumbnail storage migration
\f0\b0 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240\partightenfactor0
\ls5\ilvl1\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f6 \uc0\u9702 
\f0 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Implement 
\f3\fs26 src/services/background/ThumbnailStore.ts
\f0\fs24  using IndexedDB; LRU + TTL (keep 2 per tab+url).\
\ls5\ilvl1\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f6 \uc0\u9702 
\f0 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Migrate any legacy 
\f3\fs26 chrome.storage.local
\f0\fs24  thumbnails into IDB, then clear legacy key.\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls5\ilvl0
\f1\b \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	4	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 PR-4: Content script for viewport
\f0\b0 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240\partightenfactor0
\ls5\ilvl1
\f3\fs26 \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f4 \uc0\u9702 
\f3 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 src/content/viewport.ts
\f0\fs24  to save 
\f3\fs26 \{scrollX,scrollY,vw,vh,dpr\}
\f0\fs24  on 
\f3\fs26 visibilitychange
\f0\fs24  (hidden) and 
\f3\fs26 pagehide
\f0\fs24 .\
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240\partightenfactor0
\ls5\ilvl1\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f6 \uc0\u9702 
\f0 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Restore on 
\f3\fs26 pageshow
\f0\fs24  (idempotent; BFCache aware). Use 
\f3\fs26 chrome.storage.session
\f0\fs24 .\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls5\ilvl0
\f1\b \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	5	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 PR-5: UI updates
\f0\b0 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240\partightenfactor0
\ls5\ilvl1\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f6 \uc0\u9702 
\f0 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 In 
\f3\fs26 src/views/App.tsx
\f0\fs24 , demote \'93Capture All\'94 to optional refresh.\
\ls5\ilvl1\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f6 \uc0\u9702 
\f0 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Update Help copy to reflect 
\f1\b automatic
\f0\b0  behaviour and 
\f1\b opt-out
\f0\b0  toggle.\
\ls5\ilvl1\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f6 \uc0\u9702 
\f0 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Show neutral placeholder when no thumbnail yet (remove \'93use Capture All\'85\'94 copy).\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls5\ilvl0
\f1\b \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	6	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 PR-6: Tests & docs
\f0\b0 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240\partightenfactor0
\ls5\ilvl1\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f6 \uc0\u9702 
\f0 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Add manual test checklist in 
\f3\fs26 docs/TEST_CHECKLIST_Thumbnails.md
\f0\fs24 .\
\ls5\ilvl1\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f6 \uc0\u9702 
\f0 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Update README and a short 
\f3\fs26 docs/CHANGELOG.md
\f0\fs24  entry.\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls5\ilvl0
\f1\b \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	7	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 PR-7: Cleanup
\f0\b0 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240\partightenfactor0
\ls5\ilvl1\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f6 \uc0\u9702 
\f0 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Remove tab-switching capture paths (or mark deprecated with console warning).\
\ls5\ilvl1\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f6 \uc0\u9702 
\f0 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Replace 
\f3\fs26 beforeunload/unload
\f0\fs24  patterns in 
\f3\fs26 SessionSafetyService
\f0\fs24  with content-script lifecycle approach.\
\pard\pardeftab720\sa240\partightenfactor0

\f1\b \cf0 Acceptance criteria per PR
\f0\b0 \
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls6\ilvl0\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 No programmatic tab activation in any capture path.\
\ls6\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 First+final capture only (one each per epoch) for 
\f1\b active
\f0\b0  tab.\
\ls6\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Viewport restore works after reopen/pageshow (including BFCache).\
\ls6\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Opt-out disables all automatic captures; placeholders shown.\
\ls6\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Skips minimized/occluded windows gracefully.\
\pard\pardeftab720\partightenfactor0
\cf0 \
\pard\pardeftab720\sa298\partightenfactor0

\f1\b\fs36 \cf0 3) Agent guardrails (
\f5\fs39 docs/CONTRIBUTING_AGENT.md
\f1\fs36 )\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls7\ilvl0
\fs24 \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Scope discipline:
\f0\b0  Implement 
\f1\b only the PR\'92s scope
\f0\b0 . If you need changes outside scope, propose them first.\
\ls7\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Plan first:
\f0\b0  For each PR, output a 
\f1\b \'93Files to touch\'94 list
\f0\b0  and a 
\f1\b diff synopsis
\f0\b0  before editing.\
\ls7\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 No tab activation:
\f0\b0  Never use 
\f3\fs26 chrome.tabs.update(tabId, \{ active: true \})
\f0\fs24  for capture.\
\ls7\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Two captures max per epoch:
\f0\b0  One 
\f7\i first
\f0\i0  (post load/commit), one 
\f7\i final
\f0\i0  (pre-navigate/SPA).\
\ls7\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Throttling:
\f0\b0  \uc0\u8805  750 ms between captures extension-wide; coalesce duplicate events.\
\ls7\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Minimized windows:
\f0\b0  Detect and skip; do not attempt to hack around it.\
\ls7\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Storage limits:
\f0\b0  Thumbnails 
\f2 \uc0\u8594 
\f0  IndexedDB; viewport 
\f2 \uc0\u8594 
\f0  
\f3\fs26 storage.session
\f0\fs24 ; preferences 
\f2 \uc0\u8594 
\f0  
\f3\fs26 storage.local
\f0\fs24 .\
\ls7\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Small diffs:
\f0\b0  \uc0\u8804  ~8 files changed per PR unless justified.\
\ls7\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Tests:
\f0\b0  Include a checklist of manual scenarios per PR; run 
\f3\fs26 type-check
\f0\fs24 , 
\f3\fs26 lint
\f0\fs24 , 
\f3\fs26 build
\f0\fs24 .\
\ls7\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Commit messages:
\f0\b0  
\f3\fs26 feat(thumbnails): \'85
\f0\fs24 , 
\f3\fs26 chore(storage): \'85
\f0\fs24 , 
\f3\fs26 refactor(bg): \'85
\f0\fs24 \
\ls7\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Compliance:
\f0\b0  Keep the 
\f1\b opt-out
\f0\b0  default ON? No \'97 
\f1\b default should be ON
\f0\b0  for auto capture; opt-out is a toggle.\
\ls7\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 No external services:
\f0\b0  Do not add network screenshot services.\
\ls7\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 No speculative dependencies
\f0\b0 : Only add libs if strictly necessary (e.g., IDB helper).\
\pard\pardeftab720\partightenfactor0
\cf0 \
\pard\pardeftab720\sa298\partightenfactor0

\f1\b\fs36 \cf0 4) Task tickets skeleton (
\f5\fs39 docs/TASKS/PR-1.md
\f1\fs36  \'85 
\f5\fs39 PR-7.md
\f1\fs36 )\
\pard\pardeftab720\sa240\partightenfactor0

\f0\b0\fs24 \cf0 Each file should have:\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls8\ilvl0
\f1\b \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Goal
\f0\b0  (one sentence)\
\ls8\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Files to touch
\f0\b0  (explicit paths)\
\ls8\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Steps
\f0\b0  (numbered)\
\ls8\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Acceptance criteria
\f0\b0  (bulleted)\
\ls8\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Notes/links
\f0\b0  (to the docs above and the Chrome/MDN URLs)\
\pard\pardeftab720\sa240\partightenfactor0
\cf0 Example headers for 
\f3\fs26 docs/TASKS/PR-2.md
\f0\fs24  (Background wiring):\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls9\ilvl0\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Goal: Wire navigation + tab events and create 
\f3\fs26 CaptureScheduler
\f0\fs24 .\
\ls9\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Files: 
\f3\fs26 src/service-worker.ts
\f0\fs24 , 
\f3\fs26 src/services/background/CaptureScheduler.ts
\f0\fs24 \
\ls9\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Steps: add listeners, throttle, dedupe, window-state check, call 
\f3\fs26 tabs.captureVisibleTab
\f0\fs24 .\
\ls9\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Acceptance: first+final only, no tab activation, throttle enforced.\
\pard\pardeftab720\partightenfactor0
\cf0 \
\pard\pardeftab720\sa298\partightenfactor0

\f1\b\fs36 \cf0 5) Kickoff with Codex CLI (suggested flow)\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls10\ilvl0
\fs24 \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	1	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Point Codex CLI
\f0\b0  at 
\f3\fs26 public/manifest.json
\f0\fs24 , 
\f3\fs26 src/**
\f0\fs24 , 
\f3\fs26 docs/**
\f0\fs24 .\
\ls10\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	2	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Ask it to read 
\f5\fs26 docs/PLAYBOOK_Thumbnails_LastViewport.md
\f0\b0\fs24  and 
\f1\b summarize its plan
\f0\b0  back to you.\
\ls10\ilvl0
\f1\b \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	3	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Have it open 
\f5\fs26 docs/TASKS/PR-1.md
\f0\b0\fs24  and produce:\
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240\partightenfactor0
\ls10\ilvl1\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f6 \uc0\u9702 
\f0 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 \'93Files to touch\'94 list,\
\ls10\ilvl1\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f6 \uc0\u9702 
\f0 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 a concise patch plan,\
\ls10\ilvl1\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	
\f6 \uc0\u9702 
\f0 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 and 
\f1\b only then
\f0\b0  the diffs.\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls10\ilvl0
\f1\b \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	4	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Review
\f0\b0  changes; iterate PR-by-PR.\
\pard\pardeftab720\sa240\partightenfactor0
\cf0 Don\'92t paste the big prompt into chat; point Codex CLI at the MD files. That keeps the context stable and source-controlled.\
\pard\pardeftab720\partightenfactor0
\cf0 \
\pard\pardeftab720\sa298\partightenfactor0

\f1\b\fs36 \cf0 6) Quick call on \'93repo cleanup first?\'94\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls11\ilvl0
\fs24 \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Not required
\f0\b0  to start the thumbnails work. The code is good enough.\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls11\ilvl0\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Do 
\f1\b minimal context hygiene
\f0\b0  now (exclusions above), and slide in any doc slimming by moving long/old files to 
\f3\fs26 docs/archive/
\f0\fs24 .\
\ls11\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Prefer 
\f1\b small, additive PRs
\f0\b0  with explicit scope over a \'93grand cleanup\'94 before feature work.\
\pard\pardeftab720\partightenfactor0
\cf0 \
\pard\pardeftab720\sa298\partightenfactor0

\f1\b\fs36 \cf0 7) Final links (reference while implementing)\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls12\ilvl0
\f3\b0\fs26 \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 public/manifest.json
\f0\fs24  (permissions to expand):\uc0\u8232 {\field{\*\fldinst{HYPERLINK "https://github.com/xavstack/TabsAgo/blob/master/public/manifest.json#L13-L22"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://github.com/xavstack/TabsAgo/blob/master/public/manifest.json#L13-L22}}\
\ls12\ilvl0
\f3\fs26 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 src/service-worker.ts
\f0\fs24  (add event wiring & scheduler entry):\uc0\u8232 {\field{\*\fldinst{HYPERLINK "https://github.com/xavstack/TabsAgo/blob/master/src/service-worker.ts"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://github.com/xavstack/TabsAgo/blob/master/src/service-worker.ts}}\
\ls12\ilvl0
\f3\fs26 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 src/services/ThumbnailService.ts
\f0\fs24  (manual capture to deprecate):\uc0\u8232 {\field{\*\fldinst{HYPERLINK "https://github.com/xavstack/TabsAgo/blob/master/src/services/ThumbnailService.ts#L60-L116"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://github.com/xavstack/TabsAgo/blob/master/src/services/ThumbnailService.ts#L60-L116}}\
\ls12\ilvl0
\f3\fs26 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 src/views/App.tsx
\f0\fs24  (manual trigger + help copy to change):\uc0\u8232 {\field{\*\fldinst{HYPERLINK "https://github.com/xavstack/TabsAgo/blob/master/src/views/App.tsx#L197-L226"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://github.com/xavstack/TabsAgo/blob/master/src/views/App.tsx#L197-L226}}\uc0\u8232 {\field{\*\fldinst{HYPERLINK "https://github.com/xavstack/TabsAgo/blob/master/src/views/App.tsx#L730-L733"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://github.com/xavstack/TabsAgo/blob/master/src/views/App.tsx#L730-L733}}\
\ls12\ilvl0
\f3\fs26 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 src/services/SessionSafetyService.ts
\f0\fs24  (legacy unload hooks):\uc0\u8232 {\field{\*\fldinst{HYPERLINK "https://github.com/xavstack/TabsAgo/blob/master/src/services/SessionSafetyService.ts#L11-L17"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://github.com/xavstack/TabsAgo/blob/master/src/services/SessionSafetyService.ts#L11-L17}}\
\pard\pardeftab720\partightenfactor0
\cf0 \
\pard\pardeftab720\sa240\partightenfactor0
\cf0 If you want, I can scaffold the 
\f1\b three MD files
\f0\b0  (Playbook, Guardrails, and PR-1 task ticket) exactly as text so you can drop them straight in.\
}